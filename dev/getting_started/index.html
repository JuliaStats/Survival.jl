<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · Survival.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Survival.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Cox-proportional-hazards-regression-model"><span>Cox proportional hazards regression model</span></a></li></ul></li><li><a class="tocitem" href="../events/">Event Times</a></li><li><a class="tocitem" href="../km/">Kaplan-Meier</a></li><li><a class="tocitem" href="../na/">Nelson-Aalen</a></li><li><a class="tocitem" href="../cox/">Cox</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaStats/Survival.jl/blob/main/docs/src/getting_started.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><h2 id="Cox-proportional-hazards-regression-model"><a class="docs-heading-anchor" href="#Cox-proportional-hazards-regression-model">Cox proportional hazards regression model</a><a id="Cox-proportional-hazards-regression-model-1"></a><a class="docs-heading-anchor-permalink" href="#Cox-proportional-hazards-regression-model" title="Permalink"></a></h2><p>This tutorial shows how to fit a Cox model and set up the <a href="../events/#Survival.EventTime"><code>EventTime</code></a> values for right censored events.</p><h3 id="Dataset"><a class="docs-heading-anchor" href="#Dataset">Dataset</a><a id="Dataset-1"></a><a class="docs-heading-anchor-permalink" href="#Dataset" title="Permalink"></a></h3><p>In this example we&#39;ll use a table containing criminal <a href="https://en.wikipedia.org/wiki/Recidivism">recidivism</a> data from Rossi et al. (1980). The data pertain to 432 convicts who were released from Maryland state prisons in the 1970s and who were followed for one year after release. The released convicts were randomly assigned to receive or not receive financial aid with equal probability. The outcome of interest is the time from release to rearrest.</p><p>The dataset is available as a CSV file in this package&#39;s <code>test/data/</code> directory. To load the data as a <code>DataFrame</code>, we&#39;ll use the <a href="https://github.com/JuliaData/CSV.jl">CSV</a> and <a href="https://github.com/JuliaData/DataFrames.jl">DataFrames</a> packages.</p><pre><code class="language-julia-repl hljs">julia&gt; using Survival, StatsModels, CSV, DataFrames

julia&gt; rossi = CSV.read(joinpath(pkgdir(Survival), &quot;test&quot;, &quot;data&quot;, &quot;rossi.csv&quot;)), DataFrame);</code></pre><h3 id="Fitting-the-model"><a class="docs-heading-anchor" href="#Fitting-the-model">Fitting the model</a><a id="Fitting-the-model-1"></a><a class="docs-heading-anchor-permalink" href="#Fitting-the-model" title="Permalink"></a></h3><p>We now construct the event times used as the model response. The <code>EventTime</code> constructor accepts a time value and an indicator of whether the value was observed (<code>true</code>) or right-censored (<code>false</code>). The times in this data frame are in the column <code>week</code> and the arrest status in <code>arrest</code>. An <code>arrest</code> value of 1 indicates an observed event (arrest) and 0 indicates censoring.</p><pre><code class="language-julia-repl hljs">julia&gt; rossi.event = EventTime.(rossi.week, rossi.arrest .== 1);

julia&gt; first(rossi, 10)
5×10 DataFrame
 Row │ arrest  week   fin    age    race   wexp   mar    paro   prio   event
     │ Int64   Int64  Int64  Int64  Int64  Int64  Int64  Int64  Int64  EventTim…
─────┼───────────────────────────────────────────────────────────────────────────
   1 │      1     20      0     27      1      0      0      1      3  20
   2 │      1     17      0     18      1      0      0      1      8  17
   3 │      1     25      0     19      0      1      0      1     13  25
   4 │      0     52      1     23      1      1      1      1      1  52+
   5 │      0     52      0     19      0      1      0      1      3  52+</code></pre><p>To fit the Cox model, we can use <code>fit(CoxModel, ...)</code> or the shorthand <code>coxph(...)</code>.</p><pre><code class="language-julia-repl hljs">julia&gt; model = coxph(@formula(event ~ fin + age + race + wexp + mar + paro + prio), rossi)
StatsModels.TableRegressionModel{CoxModel{Float64}, Matrix{Float64}}

event ~ fin + age + race + wexp + mar + paro + prio

Coefficients:
────────────────────────────────────────────────
        Estimate  Std.Error    z value  Pr(&gt;|z|)
────────────────────────────────────────────────
fin   -0.379416   0.191379   -1.98253     0.0474
age   -0.0574299  0.0219988  -2.61059     0.0090
race   0.31392    0.307995    1.01924     0.3081
wexp  -0.14981    0.212226   -0.705898    0.4803
mar   -0.433724   0.38187    -1.13579     0.2560
paro  -0.0848615  0.195756   -0.433505    0.6646
prio   0.091521   0.0286469   3.1948      0.0014
────────────────────────────────────────────────</code></pre><h3 id="Accessing-values"><a class="docs-heading-anchor" href="#Accessing-values">Accessing values</a><a id="Accessing-values-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-values" title="Permalink"></a></h3><p>Many of the common functions for accessing model parameters used in packages such as <a href="https://github.com/JuliaStats/GLM.jl">GLM</a> are extended for use with <code>CoxModel</code>s.</p><p>For example, the model coefficient estimates can be extracted with <code>coef</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; coef(model)
7-element Vector{Float64}:
 -0.3794158823466362
 -0.057429889713653676
  0.313920393830735
 -0.14980964863737226
 -0.43372380447995285
 -0.08486148372086805
  0.09152099594619753</code></pre><p>Similarly, the standard errors of the estimates are accessible with <code>stderror(model)</code> and the full variance-covariance matrix with <code>vcov(model)</code>.</p><p>Other available functions include:</p><ul><li><code>loglikelihood</code>, the log likelihood of the fitted model</li><li><code>nullloglikelihood</code>, the log likelihood of the null model</li><li><code>dof</code>, degrees of freedom</li><li><code>nobs</code>, the number of observations used to fit the model</li><li><code>coeftable</code>, a table of coefficient names, estimates, standard errors, z-values, and p-values</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../events/">Event Times »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.21 on <span class="colophon-date" title="Tuesday 19 July 2022 15:42">Tuesday 19 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
